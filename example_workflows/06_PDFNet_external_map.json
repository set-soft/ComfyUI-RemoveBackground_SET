{"id":"99cbfcad-6f1c-461d-a52c-266591a5505d","revision":0,"last_node_id":80,"last_link_id":176,"nodes":[{"id":23,"type":"LoadImage","pos":[1250,790],"size":[274.080078125,314],"flags":{},"order":0,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[35]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[36]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"LoadImage","widget_ue_connectable":{"image":true,"upload":true},"ue_properties":{"version":"7.0.1"}},"widgets_values":["example.png","image"],"color":"#222","bgcolor":"#000"},{"id":49,"type":"SET_CreateEmptyImage","pos":[3530,270],"size":[270,130],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"localized_name":"reference","name":"reference","shape":7,"type":"IMAGE","link":97},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"color","name":"color","type":"STRING","widget":{"name":"color"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[98]}],"properties":{"cnr_id":"image-misc","ver":"87ee4aebb77a731442e41b595bc8b12a6fd263c3","Node name for S&R":"SET_CreateEmptyImage","widget_ue_connectable":{"width":true,"height":true,"batch_size":true,"color":true},"ue_properties":{"version":"7.0.1","widget_ue_connectable":{"width":true,"height":true,"batch_size":true,"color":true}}},"widgets_values":[1024,1024,1,"black"],"color":"#233","bgcolor":"#355"},{"id":13,"type":"PreviewImage","pos":[4270,630],"size":[378.5118408203125,246.00003051757812],"flags":{},"order":20,"mode":0,"inputs":[{"label":"images","localized_name":"images","name":"images","type":"IMAGE","link":102}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"PreviewImage","widget_ue_connectable":{},"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[],"color":"#232","bgcolor":"#353"},{"id":25,"type":"AutoDownloadPDFNetModel_SET","pos":[1940,520],"size":[284.3267517089844,166],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"dtype","name":"dtype","shape":7,"type":"COMBO","widget":{"name":"dtype"},"link":null}],"outputs":[{"localized_name":"model","name":"model","type":"SET_REMBG","links":[77]},{"localized_name":"train_w","name":"train_w","type":"INT","links":[168]},{"localized_name":"train_h","name":"train_h","type":"INT","links":[169]},{"localized_name":"norm_params","name":"norm_params","type":"NORM_PARAMS","links":null}],"properties":{"aux_id":"set-soft/ComfyUI_BiRefNet_SET","ver":"c18818ecc52db11c4f0f4bbf3767b30ad42fac8c","Node name for S&R":"AutoDownloadPDFNetModel_SET","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}},"widget_ue_connectable":{"model_name":true,"device":true,"dtype":true}},"widgets_values":["Base (392 MiB)","AUTO","AUTO"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":46,"type":"SET_FMLFE","pos":[3530,480],"size":[285.0718688964844,218],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":103},{"localized_name":"masks","name":"masks","type":"MASK","link":174},{"localized_name":"implementation","name":"implementation","type":"COMBO","widget":{"name":"implementation"},"link":null},{"localized_name":"regularization","name":"regularization","shape":7,"type":"FLOAT","widget":{"name":"regularization"},"link":null},{"localized_name":"n_small_iterations","name":"n_small_iterations","shape":7,"type":"INT","widget":{"name":"n_small_iterations"},"link":null},{"localized_name":"n_big_iterations","name":"n_big_iterations","shape":7,"type":"INT","widget":{"name":"n_big_iterations"},"link":null},{"localized_name":"small_size","name":"small_size","shape":7,"type":"INT","widget":{"name":"small_size"},"link":null},{"localized_name":"gradient_weight","name":"gradient_weight","shape":7,"type":"FLOAT","widget":{"name":"gradient_weight"},"link":null}],"outputs":[{"localized_name":"foreground","name":"foreground","type":"IMAGE","links":[99]},{"localized_name":"background","name":"background","type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":[137]}],"properties":{"cnr_id":"image-misc","ver":"8134be80328b31e2ec61a9427db96b1c279be617","Node name for S&R":"SET_FMLFE","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}},"widget_ue_connectable":{"implementation":true,"regularization":true,"n_small_iterations":true,"n_big_iterations":true,"small_size":true,"gradient_weight":true}},"widgets_values":["auto",0.00001,10,2,32,1],"color":"#233","bgcolor":"#355"},{"id":68,"type":"MarkdownNote","pos":[2330,440],"size":[340,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1"},"widget_ue_connectable":{}},"widgets_values":["# Here we use the training size"],"color":"#432","bgcolor":"#653"},{"id":71,"type":"MarkdownNote","pos":[2890,470],"size":[290,90],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1"},"widget_ue_connectable":{}},"widgets_values":["# Compute the salient mask"],"color":"#432","bgcolor":"#653"},{"id":72,"type":"MarkdownNote","pos":[3230,730],"size":[260,130],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1"},"widget_ue_connectable":{}},"widgets_values":["# Scale both, the depth map (just to display it) and the mask, to the original size"],"color":"#432","bgcolor":"#653"},{"id":73,"type":"MarkdownNote","pos":[3560,740],"size":[280,88],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1"},"widget_ue_connectable":{}},"widgets_values":["# Estimate the foreground"],"color":"#432","bgcolor":"#653"},{"id":74,"type":"MarkdownNote","pos":[3960,480],"size":[270,90],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1"},"widget_ue_connectable":{}},"widgets_values":["# Replace the background using a solid color"],"color":"#432","bgcolor":"#653"},{"id":36,"type":"DownloadAndLoadDepthAnythingV2Model_SET","pos":[2322.8984375,1073.4022216796875],"size":[288.2505798339844,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null}],"outputs":[{"localized_name":"da_v2_model","name":"da_v2_model","type":"DAMODEL","links":[70]}],"properties":{"aux_id":"set-soft/ComfyUI_BiRefNet_SET","ver":"c18818ecc52db11c4f0f4bbf3767b30ad42fac8c","Node name for S&R":"DownloadAndLoadDepthAnythingV2Model_SET","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}},"widget_ue_connectable":{"model":true}},"widgets_values":["Base F32 (372 MiB)"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":48,"type":"ImageCompositeMasked","pos":[3960,630],"size":[270,146],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"destination","name":"destination","type":"IMAGE","link":98},{"localized_name":"source","name":"source","type":"IMAGE","link":99},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":137},{"localized_name":"x","name":"x","type":"INT","widget":{"name":"x"},"link":null},{"localized_name":"y","name":"y","type":"INT","widget":{"name":"y"},"link":null},{"localized_name":"resize_source","name":"resize_source","type":"BOOLEAN","widget":{"name":"resize_source"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[102]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"ImageCompositeMasked","widget_ue_connectable":{"x":true,"y":true,"resize_source":true},"ue_properties":{"version":"7.0.1","widget_ue_connectable":{"x":true,"y":true,"resize_source":true}}},"widgets_values":[0,0,false],"color":"#232","bgcolor":"#353"},{"id":24,"type":"SET_ImageDownload","pos":[1570,790],"size":[270,362],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image_bypass","name":"image_bypass","shape":7,"type":"IMAGE","link":35},{"localized_name":"mask_bypass","name":"mask_bypass","shape":7,"type":"MASK","link":36},{"localized_name":"base_url","name":"base_url","type":"STRING","widget":{"name":"base_url"},"link":null},{"localized_name":"filename","name":"filename","type":"STRING","widget":{"name":"filename"},"link":null},{"localized_name":"local_name","name":"local_name","shape":7,"type":"STRING","widget":{"name":"local_name"},"link":null},{"localized_name":"embed_transparency","name":"embed_transparency","shape":7,"type":"BOOLEAN","widget":{"name":"embed_transparency"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[97,103,164,167,176]},{"localized_name":"alpha_mask","name":"alpha_mask","type":"MASK","links":[]}],"properties":{"cnr_id":"image-misc","ver":"3ab5664ee7057737c3215db19b078afbcead7a08","Node name for S&R":"SET_ImageDownload","widget_ue_connectable":{"base_url":true,"filename":true,"local_name":true},"aux_id":"set-soft/ComfyUI-ImageMisc","ue_properties":{"version":"7.0.1","widget_ue_connectable":{"base_url":true,"filename":true}}},"widgets_values":["https://huggingface.co/spaces/Tennineee/PDFNet/resolve/main/assets/examples/","5%23Artifact%231%23Basket%233342299538_59c014a904_o.jpg","pdfnet_example_1.jpg",false],"color":"#233","bgcolor":"#355"},{"id":70,"type":"MarkdownNote","pos":[2650,925],"size":[230,90],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"version":"7.0.1"},"widget_ue_connectable":{}},"widgets_values":["# Compute depth map"],"color":"#432","bgcolor":"#653"},{"id":37,"type":"DepthAnything_V2_SET","pos":[2660,800],"size":[210,78],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"da_model","name":"da_model","type":"DAMODEL","link":70},{"localized_name":"images","name":"images","type":"IMAGE","link":171},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"depths","name":"depths","type":"MASK","links":[165,166]},{"localized_name":"depth_imgs","name":"depth_imgs","type":"IMAGE","links":null}],"properties":{"aux_id":"set-soft/ComfyUI_BiRefNet_SET","ver":"c18818ecc52db11c4f0f4bbf3767b30ad42fac8c","Node name for S&R":"DepthAnything_V2_SET","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}},"widget_ue_connectable":{}},"widgets_values":[1],"color":"#2a363b","bgcolor":"#3f5159"},{"id":78,"type":"SET_ImageResize","pos":[2300,625],"size":[300.9000549316406,384],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":167},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":168},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":169},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"per_batch","name":"per_batch","shape":7,"type":"INT","widget":{"name":"per_batch"},"link":null},{"localized_name":"pad_transparency","name":"pad_transparency","shape":7,"type":"FLOAT","widget":{"name":"pad_transparency"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[170,171]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"cnr_id":"image-misc","ver":"1d1b99ac4989ba2a5df143f6c81913ad20f3db0b","Node name for S&R":"SET_ImageResize","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[512,512,"bicubic","stretch","#000000","center",2,"cpu",0,1],"color":"#233","bgcolor":"#355"},{"id":10,"type":"MaskPreview","pos":[4275,950],"size":[368.3013000488281,258],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":175}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"MaskPreview","widget_ue_connectable":{},"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[],"color":"#232","bgcolor":"#353"},{"id":79,"type":"MaskPreview","pos":[4275,1275],"size":[368.3013000488281,258],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":172}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.51","Node name for S&R":"MaskPreview","widget_ue_connectable":{},"ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[],"color":"#232","bgcolor":"#353"},{"id":77,"type":"SET_ResizeMask","pos":[3225,1175],"size":[270,194],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":166},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":164},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"keep_proportions","name":"keep_proportions","type":"BOOLEAN","widget":{"name":"keep_proportions"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[172]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"image-misc","ver":"1d1b99ac4989ba2a5df143f6c81913ad20f3db0b","Node name for S&R":"SET_ResizeMask","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[512,512,false,"nearest-exact","disabled"],"color":"#233","bgcolor":"#355"},{"id":80,"type":"SET_ResizeMask","pos":[3225,925],"size":[270,194],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":173},{"localized_name":"get_image_size","name":"get_image_size","shape":7,"type":"IMAGE","link":176},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"keep_proportions","name":"keep_proportions","type":"BOOLEAN","widget":{"name":"keep_proportions"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"crop","name":"crop","type":"COMBO","widget":{"name":"crop"},"link":null}],"outputs":[{"localized_name":"mask","name":"mask","type":"MASK","links":[174,175]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null}],"properties":{"cnr_id":"image-misc","ver":"1d1b99ac4989ba2a5df143f6c81913ad20f3db0b","Node name for S&R":"SET_ResizeMask","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}}},"widgets_values":[512,512,false,"nearest-exact","disabled"],"color":"#233","bgcolor":"#355"},{"id":40,"type":"GetMaskLowByBiRefNet_SET","pos":[2890,620],"size":[294.4371032714844,122],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"SET_REMBG","link":77},{"localized_name":"images","name":"images","type":"IMAGE","link":170},{"localized_name":"depths","name":"depths","shape":7,"type":"MASK","link":165},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"out_dtype","name":"out_dtype","shape":7,"type":"COMBO","widget":{"name":"out_dtype"},"link":null}],"outputs":[{"localized_name":"masks","name":"masks","type":"MASK","links":[173]},{"localized_name":"depths","name":"depths","type":"MASK","links":null},{"localized_name":"edges","name":"edges","type":"MASK","links":null}],"properties":{"aux_id":"set-soft/ComfyUI_BiRefNet_SET","ver":"c18818ecc52db11c4f0f4bbf3767b30ad42fac8c","Node name for S&R":"GetMaskLowByBiRefNet_SET","ue_properties":{"version":"7.0.1","widget_ue_connectable":{}},"widget_ue_connectable":{}},"widgets_values":[1,"AUTO"],"color":"#2a363b","bgcolor":"#3f5159"}],"links":[[35,23,0,24,0,"IMAGE"],[36,23,1,24,1,"MASK"],[70,36,0,37,0,"DAMODEL"],[77,25,0,40,0,"SET_REMBG"],[97,24,0,49,0,"IMAGE"],[98,49,0,48,0,"IMAGE"],[99,46,0,48,1,"IMAGE"],[102,48,0,13,0,"IMAGE"],[103,24,0,46,0,"IMAGE"],[137,46,2,48,2,"MASK"],[164,24,0,77,1,"IMAGE"],[165,37,0,40,2,"MASK"],[166,37,0,77,0,"MASK"],[167,24,0,78,0,"IMAGE"],[168,25,1,78,3,"INT"],[169,25,2,78,4,"INT"],[170,78,0,40,1,"IMAGE"],[171,78,0,37,1,"IMAGE"],[172,77,0,79,0,"MASK"],[173,40,0,80,0,"MASK"],[174,80,0,46,1,"MASK"],[175,80,0,10,0,"MASK"],[176,24,0,80,1,"IMAGE"]],"groups":[],"config":{},"extra":{"ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.8419669301704319,"offset":[-2210.336142632264,-130.225220767089]},"reroutes":[{"id":1,"pos":[1910,450],"linkIds":[97,103]},{"id":2,"parentId":1,"pos":[3300,280],"linkIds":[97,103]},{"id":3,"pos":[2373.189453125,1235.9757080078125],"linkIds":[164,176]},{"id":4,"pos":[2200,750],"linkIds":[167]}],"linkExtensions":[{"id":97,"parentId":2},{"id":103,"parentId":2},{"id":164,"parentId":3},{"id":167,"parentId":4},{"id":176,"parentId":3}]},"version":0.4}
